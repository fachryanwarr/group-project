{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Donasi</title>
{% endblock meta %}

<link
rel = "stylesheet"
href = "{% static 'css/style.css' %}"
/>
{% block content %}


                <section>
                  
                  <!-- Carousel -->
                  <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                      <div class="carousel-item active" data-bs-interval="1000">
                        <img class="d-block w-100" src="{% static 'image/36951-ui.jpeg' %}" alt="First slide">
                        <div class="carousel-caption d-none d-md-block">
                          <h5>First slide label</h5>
                          <p>Some representative placeholder content for the first slide.</p>
                        </div>
                      </div>
                      <div class="carousel-item" data-bs-interval="2000">
                        <img class="d-block w-100" src="{% static 'image/gambar2.jpeg' %}"  alt="Second slide">
                        <div class="carousel-caption d-none d-md-block">
                          <h5>Second slide label</h5>
                          <p>Some representative placeholder content for the second slide.</p>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <img class="d-block w-100" src="{% static 'image/gambar3.webp' %}"alt="Third slide">
                        <div class="carousel-caption d-none d-md-block">
                          <h5>Third slide label</h5>
                          <p>Some representative placeholder content for the third slide.</p>
                        </div>
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
                  
                  <!-- Judul Donasi -->
                  <div>
                    <h3>Donasi</h3>
                  </div>
                  
                  <!-- Button Donasi -->
                  <p></p>
                  <div>
                    <a type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">Donasi Sekarang!</a></button>
                    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h2 class="modal-title fs-5" id="exampleModalLabel">Buat Donasi Yuk!</h2>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                            <form id="task-form" method="POST" action="/donasi/add/" onsubmit="return false;">
                              {% csrf_token %}
                              <div class="mb-3">
                                <label for="recipient-name" class="col-form-label" placeholder="Nama">Nama</label>
                                <input type="text" class="form-control" id="field_nama" name="nama">
                              </div>
                              <div class="mb-3">
                                <label for="message-text" class="col-form-label" placeholder="100.000"></label>>Jumlah</label>
                                <input class="form-control" id="field_jumlah" name="jumlah">
                              </div>
                              <div class="mb-3">
                                <label for="message-text" class="col-form-label">Pesan</label>
                                <textarea class="form-control" id="field_pesan" name="pesan" rows="3"></textarea>
                              </div>
                            </form>
                          </div>
                          <div class="modal-footer">
                            <button type="submit" onclick="createDonasi()" id="add-donasi-btn" class="button" value="Submit" onclick="" data-bs-dismiss="modal">Submit</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Paragraf Pengantar -->
                  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris venenatis risus, 
                    mauris semper lectus pellentesque sed cursus. Fringilla id nec blandit neque mattis. 
                    Ac tortor in orci tellus at egestas. Molestie etiam et duis ipsum nam. Nibh nulla eget sed placerat at eget. 
                    Pretium, placerat posuere ullamcorper sit. Urna, imperdiet mi sollicitudin auctor eu tincidunt purus mattis massa. 
                    Quisque et ut eu neque suspendisse. Sodales augue lacus in.</p>
                    
                    <!-- Judul DonaDear -->
                    <h1>#DonaDear</h1>
                    
                    <!-- Card Donatur -->
                    <div id="card-donasi" class="row text-center g-4">
                      
                      
                    </section>
                    
                    <script>
                          function createDonasi() {
                            console.log("tes")
                                  $.post({
                                      url: `add/`,
                                      type: 'post',
                                      data: {
                                          'nama': $('#field_nama').val(),
                                          'jumlah': $('#field_jumlah').val(),
                                          'pesan' : $('#field_pesan').val(),
                                      },
                                      success: showDonasiCard
                                  })
                              }
                          $(`#add-donasi-button`).attr('onclick', `createDonasi()`);


                          function showDonasiCard() {
                              $.get('./json', function (data) {
                                      $('#card-donasi').empty();
                                      for (let i = 0; i < 6; i++) {
                                        console.log(data[i].fields.pesan)
                                          $('#card-donasi').append(
                                              `<div class="col-md-4">
                                                  <div class="card" style="width: 18rem;">
                                                    <div class="card-body">
                                                      <h5 class="card-title">Rp${data[i].fields.jumlah}</h5>
                                                      <h6 class="card-subtitle mb-2 text-muted">${data[i].fields.nama}</h6>
                                                      <h6 class="card-text">${data[i].fields.pesan}</h6>
                                                  </div>
                                              </div>`
                                          )
                                      }
                                  }
                              )
                          }
                          showDonasiCard();

                    </script>
                    
                    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
                    {% endblock content %}
                    